# ===========================================
# Stylobot Demo Stack Configuration
# ===========================================
# Copy this file to .env and customize values

# ===========================================
# Bot Detection Configuration
# ===========================================
BOTDETECTION_THRESHOLD=0.7
BOTDETECTION_BLOCK_BOTS=false
BOTDETECTION_LOG_DETAILED=true
BOTDETECTION_LOG_ALL_REQUESTS=true

# ===========================================
# LLM / AI Detection
# ===========================================
# Provider: Heuristic (fast, no LLM), LlamaSharp (in-process CPU), Ollama (external HTTP)
BOTDETECTION_AI_PROVIDER=LlamaSharp

# --- LlamaSharp (in-process CPU, zero external deps) ---
# HuggingFace model path (auto-downloaded) or local GGUF file path
BOTDETECTION_LLAMASHARP_MODEL_PATH=Qwen/Qwen2.5-0.5B-Instruct-GGUF/qwen2.5-0.5b-instruct-q4_k_m.gguf
BOTDETECTION_LLAMASHARP_CONTEXT_SIZE=512
BOTDETECTION_LLAMASHARP_TIMEOUT_MS=10000
# Model cache directory (default: /models in Docker, ~/.cache/stylobot-models locally)
BOTDETECTION_LLAMASHARP_MODEL_CACHE_DIR=/models

# --- Ollama (external HTTP, GPU-capable) ---
# Uncomment and set BOTDETECTION_AI_PROVIDER=Ollama to use
#BOTDETECTION_OLLAMA_ENDPOINT=http://ollama:11434
#BOTDETECTION_OLLAMA_MODEL=qwen3:0.6b
#BOTDETECTION_OLLAMA_TIMEOUT_MS=5000

# Signature description threshold (trigger LLM naming after N requests)
BOTDETECTION_SIGNATURE_DESCRIPTION_THRESHOLD=50

# ===========================================
# Signature & Privacy
# ===========================================
# IMPORTANT: Set these to random secrets in production!
BOTDETECTION_SIGNATURE_HASH_KEY=change-me-to-random-secret
BOTDETECTION_CLIENTSIDE_TOKEN_SECRET=change-me-to-another-secret

# ===========================================
# Dashboard
# ===========================================
STYLOBOT_DASHBOARD_PATH=/_stylobot
STYLOBOT_DASHBOARD_MAX_EVENTS=1000

# ===========================================
# Database
# ===========================================
DATABASE_PROVIDER=PostgreSQL
POSTGRES_PASSWORD=
DATABASE_TIMESCALEDB_ENABLED=true
DATABASE_AUTO_INIT_SCHEMA=true
DATABASE_RETENTION_DAYS=30

# ===========================================
# API Keys
# ===========================================
# SECURITY: The SB-* defaults below are DEMO-ONLY placeholders for local
# development and testing. They are NOT used in production.
# API keys are intended for your own automation (CI, k6 load tests,
# monitoring dashboards, dev scripts) — not for system-to-system use.
# For any internet-facing deployment, generate cryptographically random
# secrets (e.g., `openssl rand -hex 32`) and store them in .env
# (gitignored) or a secrets manager — never in source control.

# Legacy bypass key (complete detection skip)
BOTDETECTION_API_BYPASS_KEY=

# Rich API keys (detection policy overlays)
# Dashboard monitor — disables behavioral detectors for dashboard polling
BOTDETECTION_DASHBOARD_API_KEY=SB-DASHBOARD-MONITOR
# Full detection — ALL detectors enabled, logonly action (k6 testing)
BOTDETECTION_FULL_DETECTION_KEY=SB-K6-FULL-DETECTION
# Bypass — disables ALL detectors (latency baseline)
BOTDETECTION_BYPASS_KEY=SB-K6-BYPASS
# No-behavioral — disables behavioral detectors only (fingerprint testing)
BOTDETECTION_NO_BEHAVIORAL_KEY=SB-K6-NO-BEHAVIORAL

# ===========================================
# Gateway Admin
# ===========================================
ADMIN_SECRET=change-me-admin-secret

# ===========================================
# Redis (optional)
# ===========================================
REDIS_PASSWORD=change-me-redis-password
