# ===========================================
# Stylobot Website - Environment Configuration
# ===========================================
# Copy this file to .env and set the values marked CHANGE_ME.
# Only the two secrets are required. Everything else has sane defaults.
#
#   cp .env.example .env
#   nano .env          # set secrets
#   docker compose up -d

# -------------------------------------------
# 1. SECRETS (you must change these)
# -------------------------------------------

# HMAC key for hashing visitor signatures (any random string, 32+ chars)
BOTDETECTION_SIGNATURE_HASH_KEY=CHANGE_ME_random_string_32_chars_min

# Token secret for client-side fingerprinting (any random string)
BOTDETECTION_CLIENTSIDE_TOKEN_SECRET=CHANGE_ME_another_random_string

# -------------------------------------------
# 2. CONTACT FORM (optional)
# -------------------------------------------

# Web3Forms API key for the contact form.
# Get one free at https://web3forms.com
# ASP.NET reads this as Configuration["Web3Forms:AccessKey"]
Web3Forms__AccessKey=

# -------------------------------------------
# 3. BOT DETECTION TUNING (defaults are fine)
# -------------------------------------------

# Probability threshold to classify as bot (0.0 - 1.0)
BOTDETECTION_THRESHOLD=0.7

# Block detected bots (false = detect only, true = return 403)
BOTDETECTION_BLOCK_BOTS=false

# Logging
BOTDETECTION_LOG_DETAILED=true
BOTDETECTION_LOG_ALL_REQUESTS=true

# Response headers (expose detection info in HTTP headers)
BOTDETECTION_HEADERS_ENABLED=true
BOTDETECTION_HEADERS_CONFIDENCE=true
BOTDETECTION_HEADERS_DETECTORS=true
BOTDETECTION_HEADERS_PROCESSING_TIME=true

# Client-side fingerprinting probes
BOTDETECTION_CLIENTSIDE_ENABLED=true
BOTDETECTION_CLIENTSIDE_CANVAS=true
BOTDETECTION_CLIENTSIDE_WEBGL=true
BOTDETECTION_CLIENTSIDE_AUDIO=true

# -------------------------------------------
# 4. AI PROVIDER (defaults are fine)
# -------------------------------------------

# Heuristic = fast, no external deps (default)
# Ollama    = local LLM (requires Ollama running)
BOTDETECTION_AI_PROVIDER=Heuristic

# Ollama settings (only needed if AI_PROVIDER=Ollama)
# BOTDETECTION_OLLAMA_ENDPOINT=http://localhost:11434
# BOTDETECTION_OLLAMA_MODEL=llama3.2:1b
# BOTDETECTION_OLLAMA_TIMEOUT_MS=5000

# -------------------------------------------
# 5. DASHBOARD
# -------------------------------------------

STYLOBOT_DASHBOARD_PATH=/_stylobot
STYLOBOT_DASHBOARD_MAX_EVENTS=1000

# -------------------------------------------
# 6. POSTGRESQL (optional - default is in-memory)
# -------------------------------------------

# Uncomment to enable persistent storage with PostgreSQL/TimescaleDB.
# STYLOBOT_POSTGRESQL_CONNECTION=Host=db;Database=stylobot;Username=stylobot;Password=CHANGE_ME
# STYLOBOT_ENABLE_TIMESCALEDB=true
# STYLOBOT_AUTO_INIT_SCHEMA=true
# STYLOBOT_RETENTION_DAYS=30
# STYLOBOT_ENABLE_CLEANUP=true

# -------------------------------------------
# 7. EXTERNAL SERVICES (optional)
# -------------------------------------------

# Project Honeypot API key (for IP reputation checks)
# Get one free at https://www.projecthoneypot.org
# PROJECT_HONEYPOT_API_KEY=
